(function(){var c=devhd.pkg("control");var b=c.BaseControl.prototype;var d=c.createClass("EmbedControl",c.BaseControl);d.setReader=function(e){this.reader=e};d.setNetcaster=function(e){this.netcaster=e};d.setCategoryLabel=function(e){this.categoryLabel=e};d.destroy=function(){this.reader=null;b.destroy.call(this)};d.display=function(){this.part.innerHTML=templates.control.embed.processing(this.categoryLabel,this.home);
var e=this;devhd.utils.FlowUtils.parallel(e,[function(g,f){e.reader.askUpdateCategorySettings(e.categoryLabel,true,g,f)},function(g,f){e.netcaster.askUpdateMixInfo(e.categoryLabel,{title:e.categoryLabel,"default":false,publisher:"-"},g,f)}],{onComplete:function(){e.part.innerHTML=templates.control.embed.instructions(e.home.getUserId(),e.categoryLabel,e.home);
e.bind(e.element("makePrivate"),"click",a)}})};function a(){this.part.innerHTML=templates.control.embed.makingPrivate(this.categoryLabel,this.home);var e=this;devhd.utils.FlowUtils.parallel(e,[function(g,f){e.reader.askUpdateCategorySettings(e.categoryLabel,false,g,f)},function(g,f){e.netcaster.askDeleteMixInfo(e.categoryLabel,g,f)}],{onComplete:function(){e.part.innerHTML=templates.control.embed.privated(e.categoryLabel)
}})}d.onClose=function(){}})();