(function(){var b=devhd.pkg("control");var a=b.BaseControl.prototype;var c=b.createClass("DiscoverControl",b.BaseControl);c.setCategoryLabel=function(d){this.categoryLabel=d};c.setTrends=function(d){this.trends=d};c.setPreferences=function(d){this.preferences=d};c.setSuggesto=function(d){this.suggesto=d};c.setEmptyHandler=function(d){this.emptyHandler=d
};c.setMax=function(d){this.max=d};c.destroy=function(){this.trends=null;this.suggesto=null;this.preferences=null;this.emptyHandler=null;a.destroy.call(this)};c.display=function(){var e=this.trends.listRankedSubscriptions(this.categoryLabel);var f=Math.floor(Math.random()*e.length);var g=this;var d=e[f].id;this.suggesto.askSimilarFeeds(d,false,function(h){try{if(g.isDestroyed()==null){return
}if(h.length==0){devhd.fn.callback(g.emptyHandler);return}g.part.innerHTML=templates.page.base.feedsIndex(h.slice(0,g.max),100,false,[],g.home)}catch(i){devhd.fn.callback(g.emptyHandler)}},function(h,i){try{if(g.isDestroyed()==null){return}devhd.fn.callback(g.emptyHandler);$debug("[discover control] "+h)}catch(j){devhd.fn.callback(g.emptyHandler)}})
}})();