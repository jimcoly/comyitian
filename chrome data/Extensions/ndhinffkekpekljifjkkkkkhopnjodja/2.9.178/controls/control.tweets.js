(function(){var g=devhd.pkg("control");var d=g.BaseControl.prototype;var a=g.createClass("TweetsControl",g.BaseControl);a.setTwitter=function(k){this.twitter=k};a.setPreferences=function(k){this.preferences=k};a.setDialog=function(k){this.dialog=k};a.setTinyURL=function(k){this.tinyURL=k};a.setSigns=function(k){this.signs=k};a.setMax=function(k){this.max=k
};a.setQuery=function(k){this.query=k};a.destroy=function(){c.call(this);this.twitter=null;this.preferences=null;this.dialog=null;this.tinyURL=null;this.signs=null;this.query=null;d.destroy.call(this)};a.display=function(){this.part.innerHTML=templates.twitter.searching(this.query);var l=devhd.utils.BrowserUtils.getLanguage();var k=this;this.twitter.askSearch({q:this.query,lang:"en"?null:l},function(m){if(k.part==null){return
}if(m==null||m.length==0){k.part.style.display="none";return}k.part.innerHTML=templates.modules.tweets(m,k.max||5,k.home)})};function i(l){var k=l.target;var m=k.getAttribute("data-section");if(m==null){return}j.call(this,m)}function j(k){if(selectedSection!=null){this.element("tweets_"+selectedSection).style.display="none";this.element("tweets_"+selectedSection+"_selector").className="";
selectedSection=null}this.element("tweets_"+k).style.display="block";this.element("tweets_"+k+"_selector").className="selected";selectedSection=k}var e=600;var h=0.5;var f=0.5;function b(){this.dialog.show("<div id='f'></div>",e,h,f);return this.part.ownerDocument.getElementById("f")}function c(){if(this.shareControl==null){return}this.dialog.hide();
this.shareControl.unregisterObserver(this);this.shareControl.destroy();this.shareControl=null}a.retweet=function(k){try{var l=this.element(k);if(l==null){return}var m=l.getElementsByClassName("screen-name")[0].innerHTML;var o=devhd.utils.StringUtils.stripTags(l.getElementsByClassName("entry-content")[0].innerHTML);var n=this;this.home.askIncludeControl("twitter",function(){n.shareControl=new devhd.control.TwitterControl();
n.shareControl.setHome(n.home);n.shareControl.setSigns(n.signs);n.shareControl.setAnnotator(n.annotator);n.shareControl.setTwitter(n.twitter);n.shareControl.setTinyURL(n.tinyURL);n.shareControl.setPostfix(n.preferences.get("twitterPostfix")||"");n.shareControl.setPart(b.call(n));n.shareControl.setModel("message","RT @"+m+" "+o);n.shareControl.registerObserver(n);
n.shareControl.display()})}catch(p){$debug("[timeline][retweet] failed because:"+p.name+" -- "+p.message+" -- "+p.fileName+" -- "+p.lineNumber)}};a.onControlDoneSending=function(k){c.call(this);if(k!=null&&this.signs!=null){this.signs.setMessage(k)}}})();