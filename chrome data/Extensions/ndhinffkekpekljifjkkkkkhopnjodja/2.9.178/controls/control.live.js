(function(){var d=devhd.pkg("control");var b=d.BaseControl.prototype;var e=d.createClass("LiveControl",d.BaseControl);e.setTwitter=function(i){this.twitter=i};e.setPreferences=function(i){this.preferences=i};e.setDialog=function(i){this.dialog=i};e.setTinyURL=function(i){this.tinyURL=i};e.setSigns=function(i){this.signs=i};e.setMax=function(i){this.max=i
};e.setQuery=function(i){this.query=i};e.destroy=function(){h.call(this);this.twitter=null;this.preferences=null;this.dialog=null;this.tinyURL=null;this.signs=null;this.query=null;b.destroy.call(this)};e.display=function(){this.part.innerHTML=templates.twitter.searching(this.query);var j=devhd.utils.BrowserUtils.getLanguage();var i=this;this.twitter.askSearch({q:this.query,lang:"en"?null:j},function(k){if(i.part==null){return
}if(k==null||k.length==0){i.part.style.display="none";return}i.part.innerHTML=templates.page.base.quotes(k,i.max||6,i.home)})};var g=600;var f=0.5;var a=0.5;function c(){this.dialog.show("<div id='f'></div>",g,f,a);return this.part.ownerDocument.getElementById("f")}function h(){if(this.shareControl==null){return}this.dialog.hide();this.shareControl.unregisterObserver(this);
this.shareControl.destroy();this.shareControl=null}e.retweet=function(i){try{var j=this.element(i);if(j==null){return}var k=j.getElementsByClassName("screen-name")[0].innerHTML;var m=devhd.utils.StringUtils.stripTags(j.getElementsByClassName("entry-content")[0].innerHTML);var l=this;this.home.askIncludeControl("twitter",function(){l.shareControl=new devhd.control.TwitterControl();
l.shareControl.setHome(l.home);l.shareControl.setSigns(l.signs);l.shareControl.setTwitter(l.twitter);l.shareControl.setTinyURL(l.tinyURL);l.shareControl.setPostfix(l.preferences.get("twitterPostfix")||"");l.shareControl.setPart(c.call(l));l.shareControl.setModel("message","RT @"+k+" "+m);l.shareControl.registerObserver(l);l.shareControl.display()})}catch(n){$debug("[timeline][retweet] failed because:"+n.name+" -- "+n.message+" -- "+n.fileName+" -- "+n.lineNumber)
}};e.onControlDoneSending=function(i){h.call(this);if(i!=null&&this.signs!=null){this.signs.setMessage(i)}}})();