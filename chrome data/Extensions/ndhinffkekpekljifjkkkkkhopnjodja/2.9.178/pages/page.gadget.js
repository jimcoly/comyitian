(function(){var a=devhd.pkg("pages");var d=devhd.i18n.L;var c=devhd.log.get("page.gadget");a.GadgetPage=function(f){this.guid=f};var e=a.GadgetPage.prototype=new a.BasePage();e.service=function(g,f){this.pageInfo=g;this.width=f.width;this.initBase(f);var h=this.pageInfo.key.split("/");this.publisherId=h[0];this.title=h[1];this.startRenderHTML()};e.destroy=function(g,f){this.destroyBase()
};e.allowsSideArea=function(){return false};e.allowsPageHeader=function(){return false};e.startRenderHTML=function(){try{this.feedly.setNbrPages(1);this.feedly.pushContext({uri:this.pageInfo.uri,pageNumber:0,title:this.title,level:0});this.pageElem.innerHTML=templates.page.gadget.layout(this.width,this.home);var f=this;this.reader.askMix(f.pageInfo.key,function(h){try{b.call(f,h)
}catch(i){c.error(89,"problem getting mix",i);throw i}})}catch(g){this.pageElem.innerHTML=devhd.utils.ExceptionUtils.formatError("layout gadget",g)}};function b(i){if(i==null||i.length==0){this.pageElem.innerHTML=templates.page.gadget.empty();return}var g=i.slice(0,3);var f=i.slice(3,13);if(g.length==0){this.pageElem.innerHTML=templates.page.base.empty(this.reader.listSubscriptions().length,this.reader.listRankedCategories({}),this.width,this.home);
return}var k=this;this.home.askIncludeControl("recommendationArea",function(){try{var j=new devhd.control.RecommendationAreaControl();j.setHome(k.home);j.setReader(k.reader);j.setFeatured(g);j.setPage(k);j.setDisplayMode(k.feedly.getDisplayMode());j.setPart(k.element("headlines1"));j.display();k.declareControl(j)}catch(m){c.error(142,"create recommendation read",m)
}});var l=[];for(var h=1;h<f.length;h++){l.push({entry:f[h],type:4})}if(!devhd.utils.DateUtils.isWeekEnd()){l=l.sort(function(m,j){return j.entry.lastModifiedTime-m.entry.lastModifiedTime})}this.element("headlines2").innerHTML=templates.page.gadget.layoutFeatured(l,this.width,{includeSourceTitle:true,includeCategoryLabel:false,includeNoThanks:false,includeFavIcon:true},this.home);
for(var h=0;h<l.length;h++){this.askFindVisual(l[h].entry,"U4")}}})();