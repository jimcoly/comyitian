(function(){var a=devhd.pkg("pages");var e=devhd.i18n.L;var c=devhd.log.get("page.video");a.VideoPage=function(i){this.guid=i};var g=a.VideoPage.prototype=new a.BasePage();g.service=function(j,i){this.pageInfo=j;this.width=i.width;this.title="Video";this.initBase(i);this.startRenderHTML()};g.destroy=function(j,i){this.destroyBase()};g.allowsSideArea=function(){return false
};g.allowsPageHeader=function(){return true};g.startRenderHTML=function(){try{this.state="loading";this.feedly.setNbrPages(1);this.feedly.selectTab("#video");this.feedly.pushContext({uri:this.pageInfo.uri,pageNumber:0,title:this.title,level:0});this.feedly.setPageTitle("Video");this.pageElem.innerHTML=templates.page.video.layout();var i=this;devhd.utils.FlowUtils.parallel(i,[b,d],{onComplete:function(){}})
}catch(j){c.error(95,"render cover page ",j);var k=devhd.utils.ExceptionUtils.formatError("render cover page",j);this.pageElem.innerHTML=k}};function b(k,j){return;var i=this;this.reco.askStreamDigest({featured:h==2?11:16},function(){},function(){},function(m){if(i.isDestroyed()==true){return}for(var l=0;l<m.length;l++){f.call(i,m[l])}})}var h=3;function f(k){var n=5;
switch(k.label){case"#featured":var t=k.top40.sort(function(j,i){if(i.metadata.starred!=j.metadata.starred){return i.metadata.starred-j.metadata.starred}else{return i.t12hScore-j.t12hScore}});var s=3;var r=[],q=[];for(var o=0;o<s&&(2*o+1<t.length);o++){r.push(t[2*o]);q.push(t[2*o+1])}var p=t.slice(2*s);if(r.length==0){this.pageElem.innerHTML=templates.page.base.empty(this.reader.listSubscriptions().length,this.reader.listRankedCategories({}),this.width,this.home);
return}this.element("headlines1").innerHTML=templates.page.cover.displayRecommendations(r,this.home);for(var o=0;o<r.length;o++){this.askFindVisual(r[o],"U10")}this.element("headlines2").innerHTML=templates.page.cover.displayRecommendations(q,this.home);for(var o=0;o<q.length;o++){this.askFindVisual(q[o],"U10")}var u=[];for(var m=1;m<p.length;m++){u.push({entry:p[m],type:4})
}u=u.sort(function(j,i){return i.entry.lastModifiedTime-j.entry.lastModifiedTime});this.element("headlines3").innerHTML=templates.page.cover.layoutFeatured(u,this.width,{includeSourceTitle:true,includeCategoryLabel:false,includeNoThanks:false,includeFavIcon:true},this.home);for(var m=0;m<u.length;m++){this.askFindVisual(u[m].entry,"U4")}break;case"#photos":if(k.top40.length==0){return
}var l=[];for(var m=0;m<k.top40.length&&m<n;m++){var v=k.top40[m];l.push({entry:v,type:6})}this.element("photoArea").style.display="block";devhd.utils.HTMLUtils.append(this.element("photos"),templates.page.base.parts(l,this.width,{includeSourceTitle:true,includeCategoryLabel:false,includeNoThanks:true},this.home));for(var o=0;o<l.length;o++){this.askFindVisual(l[o].entry,"U6")
}break;break;case"#shows":if(k.top40.length==0){return}var l=[];for(var m=0;m<k.top40.length&&m<n;m++){var v=k.top40[m];l.push({entry:v,type:7})}this.element("mediaArea").style.display="block";devhd.utils.HTMLUtils.append(this.element("gallery"),templates.page.base.parts(l,this.width,{includeSourceTitle:true,includeCategoryLabel:false,includeNoThanks:true},this.home));
for(var o=0;o<l.length;o++){this.askFindVisual(l[o].entry,"U7")}break;default:}}function d(){var j=[];var l=this.trends.listRankedSubscriptions("#all");for(var k=0;k<l.length&&j.length<15;k++){if(this.reader.getFeedPreference(l[k].id,"entryOverviewSize")=="7"){j.push(l)}}this.element("shows").innerHTML=templates.page.video.shows(j)}})();